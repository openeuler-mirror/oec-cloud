<!-- TOC -->

- [简介](#简介)
    - [简介](#简介-1)
    - [计划概述](#计划概述)
    - [兼容性计划前置条件](#兼容性计划前置条件)
    - [兼容性技术支持](#兼容性技术支持)
- [兼容性流程概述](#兼容性流程概述)
- [服务器兼容策略](#服务器兼容策略)
    - [服务器](#服务器)
    - [CPU](#cpu)
    - [内存](#内存)
    - [板卡](#板卡)
    - [介质](#介质)
    - [BIOS策略](#bios策略)
    - [BMC策略](#bmc策略)
    - [重新测试](#重新测试)
- [硬件配置策略](#硬件配置策略)
    - [硬件选型策略](#硬件选型策略)
    - [集成硬件](#集成硬件)
    - [可选硬件](#可选硬件)

<!-- /TOC -->
# 简介

## 简介

本指南主要说明openEuler与硬件兼容性策略以及创建硬件测试计划所遵循的过程。

## 计划概述

openEuler兼容性计划提供了硬件厂家与openEuler兼容性测试支持的正式途径。通过兼容性套件测试的硬件能够获得更好的兼容性。

兼容性计划包括两部分组成，服务器、板卡（外设），通过了兼容性测试的硬件型号，统一发布在openEuler兼容性清单。

## 兼容性计划前置条件

需要硬件厂家签订《openEuler与硬件厂家兼容性协议》。

## 兼容性技术支持

openEuler社区成立sig-Compatibility-Infra的[oec-hardware](https://gitee.com/openeuler/oec-hardware)项目来提供相关支持，统一在该项目下采用issue方式提供技术支持。

# 兼容性流程概述

1.  在社区[oec-hardware](https://gitee.com/openeuler/oec-hardware)项目下创建issue并启动相关协议签署。
2.  准备好安装有openEuler版本的硬件环境。
3.  安装OECH工具。
4.  执行测试并获取测试结果。
5.  将测试结果发送到oecompatibility@openeuler.org邮箱，同时将测试结果更新到issue中。
6.  openEuler社区兼容性组针对结果进行分析，并对存疑的部分要求重新测试。
7.  测试通过后，将对应的硬件型号信息（包括服务器详细配置）和openEuler版本信息刷新到社区兼容性列表。
8.  有关硬件兼容性测试过程的完整说明，请参阅《openEuler兼容性测试套件用户指南》。

# 服务器兼容策略

硬件与openEuler 兼容性主要受CPU架构（x86/ARM）、跨代CPU、主板（USB/拓扑）、外设、BIOS、BMC等影响，因此从以上方面概述基础及变化带来的兼容性。

## 服务器

一款服务器与openEuler兼容性测试通过后，与该服务器共主板服务器可以直接继承该服务器兼容性结论。主板拓扑发生变化（如增加PCIe switch、USB设备等），需要重新做兼容性测试。

## CPU

-   不同架构CPU（如x86/ARM），需要重新做兼容性测试。
-   相同架构CPU，不同代次CPU，需要重新做兼容性测试。
-   相同代次CPU，不同主频、不同core变化，兼容性继承，不需要单独进行兼容性。

## 内存

建议配置最大容量规格内存进行测试，内存大小变化不需要重新做兼容性测试。

## 板卡

1.  常见外设板卡包括RAID卡、网卡、FC卡、SSD卡、IB卡等，服务器兼容性测试时，至少采用板卡典型配置（RAID卡、网卡）进行测试。
2.  增加未在典型配置的板卡部件，需要进行单独兼容性测试。

    >![](public_sys-resources/icon-note.gif) **说明：**   
    >1.  兼容性的板卡部件驱动在系统内无对应驱动，需要单独从社区提交issue进行讨论。  
    >2.  板卡固件版本需要从板卡厂家官网下载，板卡出厂默认携带版本除外。  


## 介质

-   硬盘，SSD盘，NVMe。
-   对于HDD和SSD，仅需要测试每种受支持的接口\(SAS/SATA\)类型之一。兼容性测试时建议选择每种类型的最大HDD或SDD。
-   所有NVMe型号都必须经过兼容性测试。

## BIOS策略

### BIOS版本

1.  BIOS版本及固件版本需要从BIOS厂家官网下载，出厂默认携带版本除外。
2.  在测试过程中，BIOS版本需要达到发布水平（例如，功能完整，没有重大问题）。要求在兼容性的发布日期之前向客户提供经过测试的版本或后续版本。

### BIOS版本变更

BIOS/固件新特性更改需要针对BIOS相关兼容性项进行兼容性测试。针对fix bug类问题，硬件厂家针对这些做内部测试，以确认它们不会对系统产生影响，但是不需要将该测试的结果提交给openEuler审核。

### 设定值

硬件厂家发布BIOS默认配置选项，并发布到硬件厂家官方网站。

## BMC策略

操作系统与BMC兼容性主要关注IPMI标准接口，遵循标准版本发生变化，需要重新进行兼容性测试。

## 重新测试

根据测试结果审视，部分测试项需要重新测试才能确认兼容性，例如解决错误，社区兼容性团队将协助您重新运行兼容性测试。

硬件厂家需提供新的重新测试结果的日志及测试结果信息。

# 硬件配置策略

## 硬件选型策略

硬件厂家在硬件规范中描述的所有集成硬件和所有可选硬件。集成硬件是模型的所有配置中都需要存在的硬件。可选硬件是模型的某些配置中存在的硬件。

## 集成硬件

对于服务器所有集成硬件，CPU选项，内存选项，集成图形控制器，集成显示器，USB设备以及其他非现场可移动硬件，均需要进行覆盖测试。

## 可选硬件

对于服务器所有可选硬件（RAID卡、网卡、FC卡、SSD卡、IB卡），其它非现场可移动硬件，均需要进行覆盖测试，在经过兼容性测试的主板上，针对可选部件单独开展兼容性测试。

